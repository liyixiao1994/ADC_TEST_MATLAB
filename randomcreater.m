%
%??????????????????????????????????????????csv????????????????8192??
%

clear all;

nbits = 15;%??????????????
zero_bit = 14;%??????????????0??????????????????
over_length = 100;%??????????????????????
filename = '/home/yixiao/test.csv';%????????????????

%
%????????????
%
x=abs(randn(9000,nbits));
x=x(x<2);
l=floor(length(x)/nbits);
if(l>8191)
    x=x(1:8192*nbits,:);
    x=floor(x);
    y=reshape(x,8192,nbits);
end

%
%????????????
%
[rows,columns]=size(y);
y(:,zero_bit)=zeros(rows,1);

%
%????????????
%
over = ones(over_length,columns);
y = [y(:,:);over(:,:)];

%csvwrite('H:\SLee\Matlab\test.csv',y);

%
%??????????????????????????????????????????????????????
%
a=num2str(y);
b=bin2dec(a);
c=dec2hex(b);

%
%????????????????
%
rows=length(c);
temp=c;
for i=1:rows
   c=[c(1:2*i-1,:);temp(i,:);c(2*i:end,:)]; 
end

%
%??????????????????????????????cell??????????????????
%
logic_input=cell(2*rows,1);
for i=1:2*rows
   logic_input{i,1}=c(i,:); 
end

%
%??????????????????????
%
[nrows,ncols]= size(logic_input);
fid = fopen(filename,'w');
for row=1:nrows
    fprintf(fid, '%s,%s\n', logic_input{row,1}(1,1:2),logic_input{row,1}(1,3:4));
end
fclose(fid);